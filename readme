API REST – Node.js & Express

--------------------------------------

Esta es una API REST desarrollada con Node.js y Express, que incluye autenticación de usuarios, manejo de productos y middlewares de seguridad.

Tecnologías utilizadas:
Node.js
Express
TypeScript
CORS
Rate Limit (limiter)
JWT (autenticación)

Bruno

--------------------------------------

Antes de emoezar a utilizar el proyecto hay que asegurarse de tener las dependencias intaladas:
NPM INSTALL

despues hay que configurar las variables, en el archivo:
.env.example

y al final ejecuatar el servidor:
NPM RUN DEV

--------------------------------------

Endpoint de verificación de la API.
Sirve para comprobar que el servidor está funcionando correctamente.

Ruta base de autenticación:
app.use("/auth", limiter, authRouter)

Todas las rutas que comienzan con /auth pasan por un limiter, el cual limita la cantidad de intentos (por ejemplo, 5 intentos en 15 minutos) para mayor seguridad.

--------------------------------------

Registrar usuario
POST /auth/register

Descripción
Permite registrar un nuevo usuario en el sistema, un ejemplo seria.

{
  "email": "usuario@email.com",
  "password": "123456"
}

Login de usuario
POST /auth/login

Descripción
Autentica al usuario y genera un token JWT, un ejemplo seria.

{
  "email": "usuario@email.com",
  "password": "123456"
}

y su respuesta podria ser:

{
  "token": "jwt_token_aqui"
}

------------------------------------

Productos (/products)

Ruta base de productos:
app.use("/products", productRouter)


En esta ruta maneja todas las operaciones relacionadas con productos.

las operaciones comunes serian:
GET /products -> Obtener todos los productos
GET /products/:id -> Obtener un producto por ID
POST /products -> Crear un producto
PUT /products/:id -> Actualizar un producto
DELETE /products/:id -> Eliminar un producto

Estas rutas pueden protegerse utilizando un authMiddleware si se requiere autenticación.

-------------------------------------

Manejo de errores 404

Si el cliente intenta acceder a una ruta que no existe, la API respondera con un:
{
  "success": false,
  "error": "El recurso no se encuentra"
}

-------------------------------------

Para utilizar nuetra api se necesita Bruno, donde una vez intalado y abierto
deberiamos estar en la pantalla inicial para luego hacer clic en “New Collection”. Despues crear una colección, hay que añadirle un nombre:

producto_API

Luego hay que seleccionar una carpeta en nuestra computadora para al final hacer clic en Create.

una vez echo eso hay que crear una peticion(endpoint) donde van a aparecer los productos,hay que hacer clic derecho sobre la colección:

productos_API

Seleccionar New Request y completar:

Type: HTTP

Request name: get products

URL y method:

GET
http://localhost:3000/products





Type: HTTP

Request name: Login

URL y method:

POST
http://localhost:3000/auth/register
http://localhost:3000/auth/login

Una vez ya hecho estas 2 colecciones hay que configurar el Body (si es POST). Ir a la pestaña Body y seleccionar JSON, luego escribir exactamente(el email y contraseña que usted quiera):
{
  "email": "usuario@mail.com",
  "password": "123456"
}

Una vez echa, hay que enviar la petición presionando el botón Send o -> . Si todo está todo correcto, la API devolverá algo como:
{
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
}

una vez que le devuelva el token, hay que guardar el token (MUY IMPORTANTE), copiar el valor del token e ir a la parte izquierda y crear una nueva peticion:

crear una petición protegida, clic derecho → New Request

Type: HTTP

Request name: Login

URL y method:

POST
http://localhost:3000/products/

una vez echa la peticion hay que configurar la autenticación. Ir a la pestaña Auth, seleccionar Tipo: Bearer Token, poner el token que guardamos:

eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

Ejecutar la petición protegida

Presionar Send

Resultado esperado:

[
  {
    "id": 1,
    "nombre": "Juan Pérez"
  }
]